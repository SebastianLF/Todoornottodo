(()=>{"use strict";const e="GET_TODOS";function t(){s({type:e})}const i=[{id:"1",name:"Throw out the trash",completed:!1},{id:"2",name:"Shop for groceries",completed:!1},{id:"3",name:"Cook a dish for my parents",completed:!1},{id:"4",name:"Do sports for 40 minutes",completed:!1},{id:"5",name:"Meditation for 15 minutes",completed:!1}],c=function(t){let c,s=[];return{getState:()=>c,subscribe:e=>(s.push(e),()=>{s=s.filter((t=>t!==e))}),dispatch:t=>{c=function(t=i,c){switch(c.type){case"ADD_TODO":return t.concat(c.todo);case"REMOVE_TODO":return t.filter((e=>e.id!==c.id));case"TOGGLE_TODO":return t.map((e=>e.id!==c.id?e:Object.assign({},e,{completed:!e.completed})));case"CLEAR_COMPLETED":return t.filter((e=>!0!==e.completed));case e:default:return t}}(c,t),s.forEach((e=>e()))}}}(),s=c.dispatch,n=c.subscribe,r=c.getState;function o(e,t,i,c){let s=i||"div";const n=document.createElement(s);return c&&(n.src=c),Array.isArray(t)?t.forEach((e=>{n.classList.add(e)})):n.classList.add(t||""),e.appendChild(n),n}function d(e){const t=document.querySelector(".list"),i=o(t,"list-item","li"),c=o(i,"list-item__completable"),n=o(c,"list-item__select-box"),r=o(n,"list-item__select-wrapper"),d=o(r,"list-item__select"),l=(o(d,"list-item__icon-check","img","./src/images/icon-check.svg"),o(c,"list-item__text")),a=o(i,"list-item__cross","button"),m=o(a,["list-item__icon-cross","hidden"],"img","./src/images/icon-cross.svg");var u,p;l.innerHTML=e.name,t.appendChild(i),u=a,p=e.id,u.addEventListener("click",(e=>{e.stopPropagation(),function(e){s(function(e){return{type:"REMOVE_TODO",id:e}}(e))}(p)})),function(e,t){e.addEventListener("click",(()=>{var e;e=t.id,s(function(e){return{type:"TOGGLE_TODO",id:e}}(e))}))}(c,e),function(e,t,i,c,s,n){e.addEventListener("mouseover",(()=>{c.classList.add("list-item__select-wrapper--active"),s.classList.remove("hidden")})),e.addEventListener("mouseleave",(e=>{c.classList.remove("list-item__select-wrapper--active"),s.classList.add("hidden")})),n.completed&&(t.classList.add("list-item__completable--completed"),i.classList.add("list-item__select--completed"),c.classList.add("list-item__select-wrapper--completed"))}(i,c,d,r,m,e)}document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".todos__form-input").addEventListener("keyup",(e=>{var t;13===e.keyCode&&(t=e.target.value,s({type:"ADD_TODO",todo:{id:"_"+Math.random().toString(36).substr(2,9),name:t,completed:!1}}),e.target.value="")}));let e="All";const i=document.querySelector(".filters__item-all"),c=document.querySelector(".filters__item-active"),o=document.querySelector(".filters__item-completed");i.addEventListener("click",(()=>{e="all",t()})),c.addEventListener("click",(()=>{e="active",t()})),o.addEventListener("click",(()=>{e="completed",t()})),n((function(){const t=r(),i=function(t){switch(e){case"active":return t.filter((e=>!0!==e.completed));case"completed":return t.filter((e=>!0===e.completed));case"All":default:return t}}(t),c=document.querySelector(".list"),n=document.querySelector(".list__items-left"),o=document.createElement("span"),l=document.createTextNode(1===t.length?" item left":" items left");document.querySelector(".list__items-clear").addEventListener("click",(()=>{s({type:"CLEAR_COMPLETED"})})),n.innerHTML="",n.append(o),n.append(l),o.textContent=t.length,c.innerHTML="",i.forEach(d)})),t()}))})();